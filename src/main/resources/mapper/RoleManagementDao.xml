<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucar.combination.dao.RoleManagementDao">
    <select id="queryList" resultType="com.ucar.combination.model.Role">
        select
        t1.id              roleId,
        t1.role_name       roleName,
        t1.approver_account_name   accountNum,
        t1.approver_staff_num     staffNum,
        t1.approver_staff_name     staffName,
        t1.approver_department_name  departmentName,
        t1.role_status    roleStatus,
        t1.description    description
        from t_role_info t1
        where t1.role_status=1
        <if test="role_name != null and role_name.trim() != ''">
            AND t1.role_name = #{role_name}
        </if>
        <if test="id != null">
            AND t1.id = #{id}
        </if>
    </select>

    <update id="updateStatus">
        update t_role_info t1
        set t1.role_status=0
        where t1.id = #{id}
    </update>

    <insert id="insertRole" parameterType="com.ucar.combination.model.dto.RoleDto">
        insert
        into t_role_info(role_name,business_line,role_status,approver_account_name,approver_staff_num,approver_staff_name,approver_department_name,description,create_emp,create_time,modify_emp,modify_time)
        value(#{roleName},#{businessLine},1,#{accountNum},#{staffNum},#{staffName},#{departmentName},#{description},1,NOW(),1,NOW())
    </insert>

</mapper>