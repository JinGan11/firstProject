<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ucar.combination.dao.CompanyManageDao">

    <resultMap type="com.ucar.combination.model.Company" id="company">
        <result column="id" property="id"/>
        <result column="company_name" property="companyName"/>
        <result column="credit_code" property="creditCode"/>
        <result column="company_type" property="companyType"/>
        <result column="business_deadline" property="businessDeadline"/>
        <result column="company_address" property="comopanyAddress"/>
        <result column="business_scope" property="businessScope"/>
        <result column="legal_person" property="legalPerson"/>
        <result column="registered_capital" property="registeredCapital"/>
        <result column="establish_time" property="establishTime"/>
        <result column="registered_institution" property="registeredInstitution"/>
        <result column="issue_date" property="issueDate"/>
        <result column="registered_status" property="registeredStatus"/>
        <result column="liscense_path" property="liscensePath"/>
        <result column="company_nature" property="companyNature"/>
        <result column="registration_address" property="registrationAddress"/>
        <result column="bank_name" property="bankName"/>
        <result column="bank_account" property="bankAccount"/>
        <result column="telephone" property="telephone"/>
        <result column="company_mark" property="companyMark"/>
        <result column="status" property="companyStatus"/>
        <result column="create_emp" property="createEmp"/>
        <result column="create_time" property="createTime"/>
        <result column="modify_emp" property="modifyEmp"/>
        <result column="modify_time" property="modifyTime"/>
        <result column="remark" property="remark"/>
    </resultMap>

    <select id="queryList" resultType="com.ucar.combination.model.Company">
        SELECT
        id,
        company_name,
        credit_code,
        company_type,
        company_nature,
        company_mark,
        status companyStatus,
        modify_emp,
        modify_time
        FROM t_company
        <where>
        <if test="companyName != null and companyName.trim() != ''">
            AND company_name =#{companyName}
        </if>
        <if test="creditCode != null and creditCode.trim() != ''">
            AND credit_code =#{creditCode}
        </if>
        <if test="companyType != null and companyType.trim() != ''">
            AND company_type =#{companyType}
        </if>
        <if test="companyNature != null and companyNature.trim() != ''">
            AND company_nature =#{companyNature}
        </if>
        <if test="companyStatus != null and companyStatus.trim() != ''">
            AND status =#{companyStatus}
        </if>
        </where>
        ORDER BY id DESC
    </select>

    <select id="getCompanyList" resultType="com.ucar.combination.model.Company">
        SELECT
        T.id,
        T.company_name,
        T.credit_code,
        T.company_type,
        T.company_nature,
        T.company_mark,
        T.status,
        T.modify_emp,
        T.modify_time
        FROM t_company T join t_r_department_company T1 on T.id = T1.department_id
        where T1.id=#{id}
    </select>
</mapper>
